# Git åˆ†æ”¯æ£€æŸ¥å·¥å…·

ä¸€ä¸ªç®€æ´çš„ Web åº”ç”¨ï¼Œç”¨äºæ£€æŸ¥ Git ä»“åº“ä¸­åˆ†æ”¯çš„åˆå¹¶çŠ¶æ€ï¼Œæ”¯æŒå¤šç§ Git å¹³å°çš„æ™ºèƒ½é“¾æ¥è·³è½¬ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”— **ä»“åº“è¿æ¥**: æ”¯æŒæœ¬åœ°è·¯å¾„å’Œè¿œç¨‹ SSH/HTTPS ä»“åº“
- ğŸ“‹ **åˆ†æ”¯ç®¡ç†**: æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯ä¿¡æ¯å’Œæäº¤å†å²
- ğŸ” **åˆå¹¶æ£€æŸ¥**: æ£€æŸ¥æŒ‡å®šåˆ†æ”¯æ˜¯å¦å·²åˆå¹¶åˆ°ç›®æ ‡åˆ†æ”¯
- ğŸŒ **å¤šå¹³å°æ”¯æŒ**: è‡ªåŠ¨è¯†åˆ« GitLabã€GitHubã€é˜¿é‡Œäº‘ CodeUp ç­‰å¹³å°
- ğŸ”— **æ™ºèƒ½é“¾æ¥**: è‡ªåŠ¨ç”Ÿæˆ MR/PR å’Œæäº¤çš„å¯ç‚¹å‡»é“¾æ¥

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### å¯åŠ¨åº”ç”¨

```bash
python app.py
```

è®¿é—® `http://localhost:5000`

## é¡¹ç›®ç»“æ„

```
pycheck/
â”œâ”€â”€ app.py              # Flaskä¸»åº”ç”¨
â”œâ”€â”€ config.json         # ä»“åº“å’Œå¹³å°é…ç½®
â”œâ”€â”€ requirements.txt    # Pythonä¾èµ–
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html     # å‰ç«¯é¡µé¢
â””â”€â”€ temp_repos/        # ä¸´æ—¶ä»“åº“ç›®å½•
```

## é…ç½®è¯´æ˜

### ä»“åº“é…ç½®

åœ¨ `config.json` ä¸­æ·»åŠ å¸¸ç”¨ä»“åº“ï¼š

```json
{
  //  æ·»åŠ ä»“åº“
  "repositories": [
    {
      "name": "é¡¹ç›®åç§°",
      "url": "git@codeup.aliyun.com:group/project.git",
      "type": "remote",
      "platform": "codeup.aliyun.com"
    }
  ],
  //  é…ç½®ä»“åº“çš„é“¾æ¥åœ°å€ä¿¡æ¯
  "platforms": {
    "codeup.aliyun.com": {
      "name": "é˜¿é‡Œäº‘CodeUp",
      "base_url": "https://codeup.aliyun.com",
      "merge_request_path": "/change/",
      "commit_path": "/commit/",
      "ssh_prefix": "git@codeup.aliyun.com:",
      "https_prefix": "https://codeup.aliyun.com/"
    }
  }
}
```

### å¹³å°é…ç½®

æ”¯æŒçš„å¹³å°é…ç½®ï¼š

- **é˜¿é‡Œäº‘ CodeUp**: `codeup.aliyun.com`
- **GitLab**: `gitlab.com`
- **GitHub**: `github.com`

æ¯ä¸ªå¹³å°åŒ…å«ï¼š

- `base_url`: å¹³å°åŸºç¡€ URL
- `merge_request_path`: MR/PR è·¯å¾„æ¨¡æ¿
- `commit_path`: æäº¤è·¯å¾„æ¨¡æ¿
- `ssh_prefix` / `https_prefix`: URL å‰ç¼€ç”¨äºè‡ªåŠ¨è¯†åˆ«

## ä½¿ç”¨æ–¹æ³•

### 1. è¿æ¥ä»“åº“

- é€‰æ‹©é¢„è®¾ä»“åº“æˆ–æ‰‹åŠ¨è¾“å…¥è·¯å¾„/URL
- æ”¯æŒæ ¼å¼ï¼š
  - æœ¬åœ°è·¯å¾„: `D:\code\project`
  - SSH: `git@platform.com:group/project.git`
  - HTTPS: `https://platform.com/group/project.git`

### 2. æ£€æŸ¥åˆ†æ”¯åˆå¹¶çŠ¶æ€

- **å…³é”®å­—**: è¦æ£€æŸ¥çš„åˆ†æ”¯å…³é”®å­—ï¼ˆå¦‚ `feature`, `0811`ï¼‰
- **ç›®æ ‡åˆ†æ”¯**: ç›®æ ‡åˆ†æ”¯åï¼ˆå¦‚ `master`, `prod`ï¼‰

### 3. æŸ¥çœ‹ç»“æœ

- åˆå¹¶çŠ¶æ€ï¼ˆå·²åˆå¹¶/æœªåˆå¹¶ï¼‰
- åˆå¹¶æ—¥æœŸå’Œæäº¤äººä¿¡æ¯
- å¯ç‚¹å‡»çš„ MR/PR å’Œæäº¤é“¾æ¥

## æ£€æµ‹é€»è¾‘

ä½¿ç”¨ `git merge-base` ç®—æ³•æ£€æŸ¥åˆ†æ”¯åˆå¹¶çŠ¶æ€ï¼š

1. è·å–æºåˆ†æ”¯å’Œç›®æ ‡åˆ†æ”¯çš„å…±åŒç¥–å…ˆ
2. åˆ¤æ–­æºåˆ†æ”¯æäº¤æ˜¯å¦åœ¨ç›®æ ‡åˆ†æ”¯å†å²ä¸­
3. æŸ¥æ‰¾å…·ä½“çš„åˆå¹¶æäº¤å’Œ MR/PR ä¿¡æ¯
4. æ”¯æŒ Fast-Forward åˆå¹¶å’Œç›´æ¥æ¨é€æ£€æµ‹

## æ³¨æ„äº‹é¡¹

- ä½¿ç”¨ SSH URL éœ€è¦é…ç½® SSH å¯†é’¥
- è¿œç¨‹ä»“åº“éœ€è¦ç½‘ç»œè¿æ¥å’Œè®¿é—®æƒé™
- ä¸´æ—¶å…‹éš†çš„ä»“åº“å­˜å‚¨åœ¨ `temp_repos/` ç›®å½•
